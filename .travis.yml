env:
  global:
  - CC_TEST_REPORTER_ID=d1c09e20447ae8db9c52cc5e8e6a8da876b2ffbb726f5b24f951e0ce8dc11367
  - secure: QzVDDixSSK9jZbtV8r8dpehaiZ0cV1pM+I2WjNgwZoMTZ/MrpRP+8JkH4AiepqitEBWrgpD2ESwOl66lQF1JkNtYqRwC5PwAx8oQn/5r3FKgq/Jq82wxUXXIBm2TOQ8oMvlqWP7+/vFa8MCvbWs4hqy975gBxZl1GVYu6POcLQitd2TIIRl5Z8Le5wxIdbHfbhCDXVi5NSOFYm/kQ8oD6GMu3veUdGd2lmFpo4eZ3gtuYTpt95qJAN6SvgIYmiqZeZwHKzRTGXVFG8cOYkZWRavSjTqzvvHjPbqK5cm4iZLuEIK8NdPnrN+l1xOZH/1HpO+NKHyAgdPLOHD299xr4x8iPnFDHPC+zNmMJ+8gb02qSZrBpKBxYX3HHsfgPLSk6kkRvS6vlaXtczTZTir7FG8Us6+Tmu/YZWAIfng6MHQQtENp6TEDsFP+r9qUhfxePBE0UaSpwOZW6zUylJVaz/nCjoPcFQ7BvfKZ9aWTHKMeJH4RxtrsPzbHwl7+ElIzSZs0AlbQhFH6yqPseNtKJ+7xRDMnJwg2BSVThSIurb8g3zrUCdZyLq7K+xdwWDwG7g6czDzvstO47FSZbiJhJkQg3t47mOQRnfidCIcrGn4H/bXNonZspNYAFcRWGfcBGefQCuBr6UKd6Ac4qTtn2XEBYS9Mjk/JJ3Oa4wMQ280=
language: python
python:
- '3.6'
before_install:
- pip install poetry
install:
- make install
services:
- postgresql
before_script:
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- ./cc-test-reporter before-build
- psql -c 'create database travis_ci_test;' -U postgres
script:
- export SECRET_KEY=$SECRET_KEY
- make lint
- make test
after_script:
- "./cc-test-reporter format-coverage -d -t coverage.py coverage.xml after-build $TRAVIS_TEST_RESULT"
- if [[ "$TRAVIS_TEST_RESULT" == 0 ]]; then ./cc-test-reporter upload-coverage; fi
